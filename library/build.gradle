buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'com.github.dcendents:android-maven-gradle-plugin:2.1'
        classpath 'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.4'
        classpath 'org.jetbrains.dokka:dokka-android-gradle-plugin:0.9.17'
    }
}

ext {
    bintrayRepo = 'gitlab'
    bintrayName = 'libgdx-oboe'

    publishedGroupId = 'com.gitlab.barsoosayque'
    libraryName = 'libGDX Oboe'
    artifact = 'libgdxoboe'

    libraryDescription = 'libGDX audio replacement for Android (API 16+) built on top of Oboe.'

    siteUrl = 'https://gitlab.com/barsoosayque/libgdx-oboe'
    gitUrl = 'https://gitlab.com/barsoosayque/libgdx-oboe.git'

    libraryVersion = '0.1.2'

    developerId = 'barsoosayque'
    developerName = 'barsoosayque'
    developerEmail = 'shtoshich@gmail.com'

    licenseName = 'The MIT License'
    licenseUrl = 'https://opensource.org/licenses/MIT'
    allLicenses = ["MIT"]
}

apply plugin: "com.android.library"
apply plugin: "com.github.dcendents.android-maven"
apply plugin: "com.jfrog.bintray"
apply plugin: "kotlin-android"
apply plugin: 'org.jetbrains.dokka-android'

configurations { natives }
sourceCompatibility = 1.6

dependencies {
    implementation "com.badlogicgames.gdx:gdx-backend-android:$gdxVersion"
    implementation "org.jetbrains.kotlin:kotlin-stdlib:$kotlinVersion"
}

android {
    buildToolsVersion "28.0.3"
    compileSdkVersion 28
    sourceSets {
        main {
            manifest.srcFile 'AndroidManifest.xml'
            java.srcDirs = ['src/kotlin']
            jni.srcDirs = ['src/cpp']
        }
    }
    defaultConfig {
        minSdkVersion 16
        targetSdkVersion 28
        ndk { abiFilters 'x86', 'x86_64', 'armeabi-v7a', 'arm64-v8a' }
        externalNativeBuild {
            cmake {
                cppFlags "-std=c++17"
                arguments "-DCMAKE_BUILD_TYPE=Debug"
            }
        }
    }
    externalNativeBuild {
        cmake {
            path "CMakeLists.txt"
            version "3.7.1"
        }
    }
    dokka {
        outputFormat = 'javadoc'
        outputDirectory = "$buildDir/javadoc"
    }
}

apply from: 'bintray.gradle'